set $e exec --no-startup-id
set $mod Mod4

font pango:JetBrainsMono Nerd Font 12
smart_gaps on 
floating_modifier $mod
smart_borders on
gaps inner 0
gaps outer 0
default_border pixel 3

set $mega Action: [d]iscord [e]lement s[l]ack [s]ignal [w]hatsapp
bindsym $mod+c mode "$mega"
mode "$mega" {
    bindsym d $e toggler discord; mode "default"
    bindsym e $e element-desktop; workspace $ws9; mode "default"
    bindsym l $e slack; workspace $ws9; mode "default"
    bindsym s $e toggler signal; mode "default"
    bindsym w $e toggler whatsapp; mode "default"
    bindsym $mod+c mode "default"
    bindsym Escape mode "default"
    bindsym Return mode "default"
}

set $games Action: [h]eroic [l]ichess [m]inecraft [s]team
bindsym $mod+shift+g mode "$games"
mode "$games" {
    bindsym h $e heroic; mode "default"
    bindsym l $e brave --profile-directory=Default --app-id=pdihgkikjgccndbckbcgjmcnpkockcjg; mode "default"
    bindsym m $e xdg-launch minecraft-launcher; mode "default"
    bindsym s $e xdg-launch steam; mode "default"
    bindsym $mod+shift+g mode "default"
    bindsym Escape mode "default"
    bindsym Return mode "default"
}

set $applets Action: [b]lueman-applet next[c]loud [n]m-applet 
bindsym $mod+shift+n mode "$applets"
mode "$applets" {
    bindsym b $e toggler blueman-applet; mode "default"
    bindsym c $e toggler nextcloud; mode "default"
    bindsym n $e toggler nm-applet; mode "default"
    bindsym $mod+shift+n mode "default"
    bindsym Escape mode "default"
    bindsym Return mode "default"
}

set $redshift Action: [r]edshift redshift-[d]ark
bindsym $mod+shift+r mode "$redshift"
mode "$redshift" {
    bindsym r $e toggler redshift; mode "default"
    bindsym d $e toggler redshift-dark; mode "default"
    bindsym $mod+shift+r mode "default"
    bindsym Escape mode "default"
}

#i3 gets mad without this
bindsym $mod+Mod1+control+shift+d layout toggle split

bindsym $mod+s $e toggler music

#Startup
$e lxsession #Needed by fprintd
$e feh --bg-fill --no-fehbg ~/pictures/wallpapers/lone-tree.jpg
$e picom --experimental-backends
$e dunst
$e i3-autolayout autolayout
$e greenclip daemon
$e gnome-keyring-daemon --start #Hooked up to PAM
# $e rclone mount googledrive: ~/drive/
$e libinput-gestures-setup start
# $e urxvtd -q
#$e nextcloud

assign [class="Tor Browser"] $ws7
assign [class="Mailspring"] $ws9
assign [class="discord"] $ws9
assign [class="Slack"] $ws9
assign [class="Signal"] $ws9
assign [class="Element"] $ws9
assign [instance="crx_hnpfjngllnobngcgfapefoaidbinmjnm"] $ws9 # Whatsapp
assign [instance="pipe-viewer"] $ws10
assign [instance="newsboat"] $ws10

for_window [class="Pavucontrol"] floating enable
for_window [class="Blueman-manager"] floating enable
for_window [class="Protonvpn"] floating enable

for_window [instance="bluetooth"] floating enable, resize set 800 400, move scratchpad
for_window [instance="calc"] floating enable, resize set 800 400, move scratchpad
for_window [instance="nm-connection-editor"] floating enable, resize set 800 400
for_window [instance="cmus"] floating enable, resize set 1200 900, move scratchpad
for_window [instance="spt"] floating enable, resize set 1200 900, move scratchpad
for_window [instance="notes"] floating enable, resize set 1200 900, move scratchpad
for_window [instance="pulsemixer"] floating enable, resize set 1200 900, move scratchpad
for_window [instance="spotify"] floating enable, resize set 1700 1020, move scratchpad

for_window [instance="crx_elldfnmogicegdcphgljaoaklkpcnbnn"] move scratchpad, floating enable, resize set 1700 1020
for_window [instance="crx_pjibgclleladliembfgfagdaldikeohf"] move scratchpad, floating enable, resize set 1700 1020
for_window [instance="crx_gipedbjkhfgkohfgefhoabnbnbomkjkc"] move scratchpad, floating enable, resize set 1900 1020
for_window [instance="crx_pdigihnmoiplkhocekidmdcmhchhdpjo"] move scratchpad, floating enable, resize set 1900 1020

for_window [class="(.*join\?action\=join.*|.*zoom.*)"] floating enable
for_window [class="(.*join\?action\=join.*|.*zoom.*)" title="Zoom - Licensed Account"] floating disable
for_window [class="(.*join\?action\=join.*|.*zoom.*)" title="Zoom Meeting"] floating disable

#Set workspace names
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

bar {
    font pango:JetBrainsMono Nerd Font 12
    strip_workspace_numbers yes
    position top
    status_command i3status-rs
    colors {
        separator #928374
        background #32302f
        statusline #ebdbb2
        focused_workspace #689d6a #689d6a #282828 #ffffff
        active_workspace #1d2021 #1d2021 #928374 #ffffff
        inactive_workspace #32302f #32302f #928374 #888888
        urgent_workspace #cc241d #cc241d #ebdbb2 #ffffff
    }
}

# set primary gruvbox light colorscheme colors
set $bg #32302f
set $red #cc241d
set $green #98971a
set $yellow #d79921
set $blue #458588
set $purple #b16286
set $aqua #689d68
set $gray #a89984
set $darkgray #1d2021

# class                 border|backgr|text|indicator|child_border
client.focused #689d6a #689d6a #282828 #282828
client.focused_inactive #1d2021 #1d2021 #928374 #282828
client.unfocused #32302f #32302f #928374 #282828
client.urgent #cc241d #cc241d #ebdbb2 #282828
