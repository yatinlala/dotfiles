#!/usr/bin/sh -e

case $1 in
    bc)
        pgrep -x bc || $TERMINAL -name calc -e bc -lq
        i3-msg "[instance=calc] scratchpad show; [instance=calc] move position center";;
    calendar)
        wmctrl -l | grep -q "point Google Calendar -" || \
        (gtk-launch calendar; sleep 1)
        i3-msg "[instance=crx_kjbdgfilnfhdoflbpgamdcdgpehopbep] scratchpad show; \
        [instance=crx_kjbdgfilnfhdoflbpgamdcdgpehopbep] move position center";;
    espanso)
        pgrep -x espanso && (espanso stop; notify-send "Espanso stopped.") || \
        setsid espanso daemon &;;
    gmail)
        wmctrl -l | grep -q "point Gmail" || \
        (gtk-launch gmail; sleep 1)
        i3-msg "[instance=crx_fmgjjmmmlfnkbppncabfkddbjimcfncm] scratchpad show; \
        [instance=crx_fmgjjmmmlfnkbppncabfkddbjimcfncm] move position center";;

    mailspring)
        (pgrep -x mailspring && (wmctrl -l | grep -q "point Mailspring" || \
        setsid mailspring &)) || setsid mailspring &
        i3-msg workspace 1:;;
    music)
        if pgrep -x "spotify" >/dev/null || pgrep -x "cmus" >/dev/null
        then
            playerctl --player=spotify,cmus play-pause
        elif pgrep -x "spotifyd">/dev/null
        then
            playerctl --player=spotifyd play-pause
        else
            i3-msg mode "Action: [a]udacity ar[d]our [e]artraining [r]eaper | rofi-[b]eats [c]mus [s]potify s[p]otify-tui"
        fi;;
    nm-applet)
        pgrep -x "nm-applet" && killall nm-applet || setsid nm-applet &;;
    notes)
        wmctrl -l | grep -q "point notes" || \
        $TERMINAL -name notes -title notes -e nvim ~/documents/wiki/index.md
        i3-msg "[title="notes"] scratchpad show; [title="notes"] move position center";;
    redshift)
        pgrep -x "redshift" && (killall redshift; notify-send "Killing redshift.") || \
        (notify-send "Starting Redshift."; setsid redshift);;
    spotifyd)
        pgrep -x spotifyd && (notify-send "Killing spotifyd."; killall spotifyd) || \
        (notify-send "Starting spotifyd."; setsid spotifyd &);;
    spotifyd-spt) 
        (killall -q spotifyd && setsid spotifyd &) || setsid spotifyd &
        (killall -q spt && i3-msg 'workspace 10:') || i3-msg 'workspace 10:'
        $TERMINAL -name spt -e spt;;
    spotify-tui)
        pgrep -x "spotifyd" || spotifyd &
        pgrep -x spt || $TERMINAL -name spt -class spt -e spt
        i3-msg workspace 10:;;
    todoist)
        wmctrl -l | grep -q "point Todoist" || (gtk-launch todoist; sleep 1)
        i3-msg "[instance="crx_elldfnmogicegdcphgljaoaklkpcnbnn"] scratchpad show; [instance="crx_elldfnmogicegdcphgljaoaklkpcnbnn"] move position center";;
    *) echo "Invalid argument.";;
esac
