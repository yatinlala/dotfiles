#!/bin/sh

# c-t could be tab, but TODO fzf doesnt support kitty kb protocol

file=$(
  fd --type f --full-path /home/yatin/videos |
    fzfwp \
      --bind 'ctrl-t:transform-query(_fuzzy_video_toggler {q})' \
      --preview='fzf-preview.sh {}'
)

if [ -n "$file" ]; then
  setsid -f mpv "$file" >/dev/null 2>&1
  kitty @ close-window
fi
